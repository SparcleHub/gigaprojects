**Задание 1. Шифрование секретных переменных и использование готовой роли из Ansible Galaxy**

1\. Подготовьте рабочее окружение Ansible. Убедитесь, что на локальной машине или виртуальной машине установлена актуальная версия Ansible.  
2\. Создайте YAML-файл, где будут храниться несколько тестовых конфиденциальных данных (логины, пароли, токены).  
Содержание может быть любым, лишь бы это были «секретные» переменные.  
![d735c9aa001b05a9aa4286e2b7776743.png](../../../_resources/d735c9aa001b05a9aa4286e2b7776743.png)

3\. Используя функциональность Ansible Vault, зашифруйте этот файл. Проверьте, что теперь содержимое в репозитории выглядит как зашифрованный текст. При этом вы должны иметь возможность расшифровать или отредактировать файл без хранения открытой версии на диске.  
![5c90b84f4cd09e8c728e655b536c0df0.png](../../../_resources/5c90b84f4cd09e8c728e655b536c0df0.png)

4\. Убедитесь, что Ansible при запуске плейбуков получает доступ к этим переменным, и что они не «утекают» в логах или историях версий.

* * *

![ae8cb1f9cffd5e1f947a9bca32e49c4c.png](../../../_resources/ae8cb1f9cffd5e1f947a9bca32e49c4c.png)

* * *

![9ba15cd9229143cd8ecd18ca78b0523f.png](../../../_resources/9ba15cd9229143cd8ecd18ca78b0523f.png)

* * *

![29b0cd84e02c2f66365729e3e7e44584.png](../../../_resources/29b0cd84e02c2f66365729e3e7e44584.png)

* * *

![8a57ab09507294dbd178db5c58b19edf.png](../../../_resources/8a57ab09507294dbd178db5c58b19edf.png)

5\. Определите, какую роль из Ansible Galaxy вы хотите использовать. Можно взять любую, например, роль для установки Docker. По возможности изучите документацию и учтите все требования к окружению.  
6\. Загрузите найденную роль в свой проект, пользуясь подходящим способом из описания на Galaxy (либо через отдельный файл зависимостей, либо напрямую).  
<br/>requirements.yml  
![7dc0ee8f28ec43862db9803c13b83d17.png](../../../_resources/7dc0ee8f28ec43862db9803c13b83d17.png)

* * *

![bc5a1c3176a5f3e568b85091b5cd3031.png](../../../_resources/bc5a1c3176a5f3e568b85091b5cd3031.png)  
<br/>

7\. Создайте короткий playbook, в котором вы подключите эту роль к своему локальному хосту (или тестовому серверу).  
<br/>![aae32c45297ac5eecbf5866e2d8a93fd.png](../../../_resources/aae32c45297ac5eecbf5866e2d8a93fd.png)  
![9226952808fbf51348a34df51183711d.png](../../../_resources/9226952808fbf51348a34df51183711d.png)

Проверьте, что роль действительно устанавливает нужное ПО и отрабатывает без ошибок.  
<br/>![3e591e70de52adc3ad6ef334e24cc268.png](../../../_resources/3e591e70de52adc3ad6ef334e24cc268.png)

8\. Если вам нужно изменить какие-то настройки роли, попробуйте переопределить её переменные в вашем playbook или инвентори. Проанализируйте, корректно ли применение настроек.