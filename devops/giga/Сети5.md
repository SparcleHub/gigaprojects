**Задание 1:**

**Настройка обратного прокси**

1\. Установите Python и Flask. Создайте простое Flask-приложение, которое будет запускаться на порту 5000. Оно должно возвращать текст, например, "Hello from Flask!".  
![2908a5320e86ebd7c1051aaf93581d04.png](../../_resources/2908a5320e86ebd7c1051aaf93581d04.png)  
![70775e70f4d3c1c3098a067f588f116e.png](../../_resources/70775e70f4d3c1c3098a067f588f116e.png)  
<br/>

2\. Настройте Nginx для проксирования запросов:  
\-Настройте так, чтобы запросы к http://mysite.local/api/ перенаправлялись на ваше Flask-приложение.  
![9cff3e28424fb52ea4ca77ee234c2679.png](../../_resources/9cff3e28424fb52ea4ca77ee234c2679.png)

3\. Перезапустите Flask-приложение и Nginx. Проверьте, что запросы к [http://mysite.local/api/возвращают](http://mysite.local/api/%D0%B2%D0%BE%D0%B7%D0%B2%D1%80%D0%B0%D1%89%D0%B0%D1%8E%D1%82) ответ от вашего Flask-приложения.  
![6273d3f8cb06909a0cedfb6b26149d31.png](../../_resources/6273d3f8cb06909a0cedfb6b26149d31.png)  
![28cd416fda36563aa09a1cd15bedf66c.png](../../_resources/28cd416fda36563aa09a1cd15bedf66c.png)

**Конечный результат:** При переходе по адресу http://mysite.local/api/ в браузере вы должны видеть сообщение из вашего Flask-приложения. Убедитесь, что ответ от приложения появляется, и проверьте логи Nginx для подтверждения, что запросы проксируются.

&nbsp;

**Задание 2:**

**Балансировка нагрузки**

1\. Создайте два Flask-приложения на портах 5001 и 5002. Каждое должно возвращать уникальный текст, например, "Hello from App 1!" и "Hello from App 2!".  
<br/>sudo vim /opt/flask_app1.py  
![2ff6cfad8c5592b14cb95a29b6379fc8.png](../../_resources/2ff6cfad8c5592b14cb95a29b6379fc8.png)  
sudo vim /opt/flask_app2.py  
![f47e0bb9eecb062e1a5827670cc974dd.png](../../_resources/f47e0bb9eecb062e1a5827670cc974dd.png)  
<br/>

2\. Настройте Nginx для балансировки нагрузки:

\-Настройте upstream-блок, который включает оба Flask-приложения.  
![f76a8336b1aca88acbebd0d9085a99cf.png](../../_resources/f76a8336b1aca88acbebd0d9085a99cf.png)

\-Настройте проксирование всех запросов к http://mysite.local/ на этот upstream-блок.  
![e26a164bcf8ce54571f1d0c8369bca3f.png](../../_resources/e26a164bcf8ce54571f1d0c8369bca3f.png)

3\. Перезапустите приложения и Nginx. Проверьте, что запросы распределяются между двумя приложениями.  
![600441af8853da2fad6ff211375e6444.png](../../_resources/600441af8853da2fad6ff211375e6444.png)  
![b652c7854ad754858e045c59815c8307.png](../../_resources/b652c7854ad754858e045c59815c8307.png)

**Конечный результат:** При обновлении страницы на http://mysite.local в браузере вы должны видеть чередующиеся ответы от двух Flask-приложений. Обновите страницу несколько раз и убедитесь, что ответы от приложений чередуются. Проверьте логи Nginx для подтверждения распределения запросов.

&nbsp;

&nbsp;

&nbsp;