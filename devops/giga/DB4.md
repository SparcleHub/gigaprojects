**Задание 1. Установка MongoDB и настройка окружения**

\-Установите MongoDB на свой компьютер или сервер  
\-Настройте базу данных, создайте основную коллекцию users, в которой будут храниться профили пользователей. Каждая запись должна содержать поля: user_id, name, age, friends (список идентификаторов друзей).  
![a80db5fe87e7e3b65abc0effba9e3061.png](../../_resources/a80db5fe87e7e3b65abc0effba9e3061.png)

\-Изучите интерфейс командной строки MongoDB или MongoDB Atlas для выполнения запросов.  
<br/>

**Задание 2. Создание и добавление данных**

Создайте несколько документов в коллекции users, используя такие поля:  
\-user_id: уникальный идентификатор пользователя.  
\-name: имя пользователя.  
\-age: возраст пользователя.  
\-friends: массив идентификаторов друзей.  
Добавьте пять различных записей, при этом каждая запись должна иметь разное количество друзей.  
Используйте команду insertOne() для добавления одного документа и insertMany() для добавления нескольких записей за один запрос.  
![3b6c2640414dd79640209d1264c11ed1.png](../../_resources/3b6c2640414dd79640209d1264c11ed1.png)

**Задание 3. Извлечение данных и фильтрация**

Используйте команды find() и findOne() для извлечения информации о пользователях:  
\-Извлеките всех пользователей с возрастом больше 20 лет.  
![35ffe6c7800c69bec7feb722df29839a.png](../../_resources/35ffe6c7800c69bec7feb722df29839a.png)

\-Найдите пользователя по имени и отобразите его друзей.  
![64af5ade5939e865cf8a296ee95c781e.png](../../_resources/64af5ade5939e865cf8a296ee95c781e.png)

\-Извлеките пользователей, у которых в списке друзей определенное количество друзей.  
![4b58ba579e55633387820ced0076df84.png](../../_resources/4b58ba579e55633387820ced0076df84.png)

\-Попробуйте отсортировать результаты по возрасту в порядке убывания.  
![45e75432c6809c3b8fa7d144b2cb60d2.png](../../_resources/45e75432c6809c3b8fa7d144b2cb60d2.png)

**Задание 4. Использование вложенных данных и массивов**

\-Добавьте к документам пользователей дополнительное поле posts, представляющее собой массив объектов. Каждый объект в массиве posts должен включать: post_id, content, date.  
![6f57f1857836f574a6230216033842e5.png](../../_resources/6f57f1857836f574a6230216033842e5.png)

\-Используйте MongoDB запрос для извлечения пользователей с определенной фразой в посте.  
![8fc927a374e6319724d4d0795d2ef159.png](../../_resources/8fc927a374e6319724d4d0795d2ef159.png)

\-Убедитесь, что запросы извлекают только нужные данные, используя проекцию (.find({}, { поле: 1 })).  
![3cd8c33cb38a4140e409e22f6ebdc8b2.png](../../_resources/3cd8c33cb38a4140e409e22f6ebdc8b2.png)

**Задание 5. Изучение индексов для оптимизации поиска**

\-Создайте индекс для поля name в коллекции users для ускорения поиска пользователей по имени.  
\-Сравните время выполнения поиска по полю name до и после создания индекса. Сначала выполните поиск без индекса, зафиксируйте время выполнения, затем создайте индекс и повторите запрос, сравнив время.  
![55fac423c7ea62381b962c7ee7220c29.png](../../_resources/55fac423c7ea62381b962c7ee7220c29.png)

**Задание 6. Обновление и удаление данных**

\-Обновите возраст одного из пользователей, увеличив его на 5 лет, используя команду updateOne().  
![167bdc05a4beb723db74bfed511ff022.png](../../_resources/167bdc05a4beb723db74bfed511ff022.png)

\-Удалите всех пользователей младше 18 лет с помощью команды deleteMany().  
![faddf7c4d92e68ec9f479fe7c3a16936.png](../../_resources/faddf7c4d92e68ec9f479fe7c3a16936.png)

\-После удаления выполните запрос для подтверждения удаления.  
![b2f9a296abbca3ec0a43f2be4ee96b61.png](../../_resources/b2f9a296abbca3ec0a43f2be4ee96b61.png)

**Задание 7.Бэкап и восстановление данных**

\-Создайте резервную копию коллекции users с помощью команды mongodump.  
![0c29298bfb61e7dfb356f3e6cfb14598.png](../../_resources/0c29298bfb61e7dfb356f3e6cfb14598.png)

\-Удалите один из документов в коллекции, а затем восстановите коллекцию из резервной копии с помощью mongorestore.  
![f660fe2948c2fc4215278434dcebf590.png](../../_resources/f660fe2948c2fc4215278434dcebf590.png)  
sudo mongorestore --db=social_network --collection=users /tmp/mongobackup/social_network/users.bson  
![7237a7d76c4032e88dd1a575f16d99a4.png](../../_resources/7237a7d76c4032e88dd1a575f16d99a4.png)